---
layout: post
title: How to handle the Windows Authentication pop-up with Selenium RC
date: '2010-03-16T14:17:00.007-04:00'
author: Dawn
tags:
- automation
modified_time: '2010-03-18T08:48:04.597-04:00'
thumbnail: http://2.bp.blogspot.com/_uSs0FPBdbmE/S5_M27MpVzI/AAAAAAAAACI/uFQnGtgcET8/s72-c/auth-dialog.png
blogger_id: tag:blogger.com,1999:blog-6005334108330583722.post-2439135014861025189
blogger_orig_url: http://confessionsofanagiletester.blogspot.com/2010/03/how-to-handle-windows-authentication.html
---

For the first pass at this post, the scope is going to be pretty narrow.  I'm going to try to use terminology that makes sense, but it may not be entirely accurate.  I think that when I was trying to solve this problem, it's part of why I struggled.<div><br /></div><div>I was working on a Selenium script for a newly built internal QA web site (yay!).  When I go to this web site, however, before the web site loads at all, I get a little modal dialog box that asks me for authentication:</div><div><br /></div><div><br /><a onblur="try {parent.deselectBloggerImageGracefully();} catch(e) {}" href="http://2.bp.blogspot.com/_uSs0FPBdbmE/S5_M27MpVzI/AAAAAAAAACI/uFQnGtgcET8/s1600-h/auth-dialog.png"><img style="display:block; margin:0px auto 10px; text-align:center;cursor:pointer; cursor:hand;width: 320px; height: 133px;" src="http://2.bp.blogspot.com/_uSs0FPBdbmE/S5_M27MpVzI/AAAAAAAAACI/uFQnGtgcET8/s320/auth-dialog.png" border="0" alt="" id="BLOGGER_PHOTO_ID_5449299318117324594" /></a><br /></div><div>Well, Selenium has no capability for dealing with this box.  I found, after much searching for terms like "selenium authentication", that putting the username and password into the URL was not going to help me.  I have come to learn that that kind of authentication is called "HTTP authentication".   If that's what you need, you should be able to solve it via this Selenium FAQ post:  <a href="http://wiki.openqa.org/display/SEL/Selenium+Core+FAQ#SeleniumCoreFAQ-HowdoIuseSeleniumtologintositesthatrequireHTTPbasicauthentication%28wherethebrowsermakesamodaldialogaskingforcredentials%29%3F">Selenium and Basic HTTP Authentication</a></div><div><br /></div><div>I tried it, but it did not help.</div><div><br /></div><div>It turns out, what my site was doing was a form of Windows-based authentication.  And, as it turns out, it's not something Selenium can take care of at all.  If hard-pressed, you can use something like AutoIT to script that part out.  I don't yet need something that robust, so I decided to go with simpler solutions.  I did find this great post from Atlassian blogs about writing a <a href="http://blogs.atlassian.com/developer/2009/06/selenium_testing_with_windows.html">Selenium Container to deal with Windows Basic Authentication</a>.</div><div><br /></div><div>In any case, for the time being, I have created a Firefox profile just for use with Selenium, and then have told the Selenium server to use that profile, rather than creating a clean profile every time.</div><div><br /></div><div>So how do ya do that?  </div><div><br /></div><div>Start by creating a Firefox profile.  How to do that is actually pretty well documented here:</div><div><br /></div><div><a href="http://support.mozilla.com/en-US/kb/Managing+Profiles">Mozilla Support: Managing Firefox profiles</a></div><div><br /></div><div>I should note here also that I have seen it recommended that whatever profile you create here should be in a different directory than the default profile directory that Mozilla uses.  I did do that, for easy access, at the very least.  </div><div><br /></div><div>There's a really great blog post <a href="http://girliemangalo.wordpress.com/2009/02/05/creating-firefox-profile-for-your-selenium-rc-tests/">here</a>, about some other profile configurations that can be made to optimize automated testing.  There are some great settings in there that will save you heartache.</div><div><br /></div><div>Once I created a profile that I intended to be used for Selenium, I started Firefox under that profile.  In order to have the authentication dialog stop appearing, I had to go into the configuration for Firefox and tweak a few settings:</div><div><br /></div><div>In the URL bar, type "about:config"</div><div><br /></div><div>Tell it yes, you'll behave, and then you see a long list of configuration parameters.  In the Filter box, type "ntlm".</div><div><br /></div><div>You'll see 3 entries ... we care most about the "network.automatic-ntlm-auth.trusted-uris" one.  In this one, type the server names that you want to stop this behavior on.  For me, I just typed "qa1,localhost" (qa1.domain.com is my test server).</div><div><br /></div><div>The Atlassian post above indicates that you should also change the "network.ntlm.send-lm-response" to true, so feel free to do that, too (I didn't and it still worked for me, so ..... just try it and see what works?).</div><div><br /></div><div>Then, you've got this profile ready to go.  So the next thing is to tell the Selenium server to use that profile.  When you start the Selenium server, pass it the following parameter:</div><div>-firefoxProfileTemplate "path-to-profile<path><path>"<br /><br /></path></path></div><div><path>As a matter of preference, if you're not using Sauce RC, I'd highly recommend it.  You can download it for free here:  <a href="http://saucelabs.com/products/downloads">Sauce RC</a><br /></path></div><div><br /></div><div>It will run your selenium server for you, and has a convenient "Preferences" page where you can put in the parameters you need.  If you're like me, you always end up getting stuck on some dumb syntactical issue and pulling your hair out.  This saves my hair, and maybe yours, too.</div><div><br /></div><div>For the record, I am aware that I didn't cover IE or Chrome, or any other browsers.  It's just because I haven't gotten to them yet.  I will post about it when I do.  Also, I'd love to hear your feedback if you try it and work through any other details or complications.  I'd like to make this post as robust as I can ... </div>
